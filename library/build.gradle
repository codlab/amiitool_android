apply plugin: 'com.android.model.library'

model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = "23.0.2"

        defaultConfig {
            minSdkVersion.apiLevel = 14
            targetSdkVersion.apiLevel = 23
        }

        buildTypes {
            release {
                minifyEnabled = false
                proguardFiles.add(file('proguard-rules.txt'))
            }
        }

        ndk {
            abiFilters.addAll(["armeabi", "armeabi-v7a", "x86"])
            moduleName 'libcrypto'
            CFlags.addAll(['-I' + file('src/main/jni/include')])
        }

        sources {
            main {
                jni {
                    dependencies {
                        library "crypto" linkage "static"
                        library "ssl" linkage "static"
                    }
                }
            }
        }
    }


    repositories {
        libs(PrebuiltLibraries) {
            crypto {
                binaries.withType(StaticLibraryBinary) {
                    def cryptoLibPath = "src/main/jni/libs/${targetPlatform.getName()}/libcrypto.a"
                    staticLibraryFile = file("${cryptoLibPath}")
                }
            }
        }
        libs(PrebuiltLibraries) {
            ssl {
                binaries.withType(StaticLibraryBinary) {
                    def sslLibPath = "src/main/jni/libs/${targetPlatform.getName()}/libssl.a"
                    staticLibraryFile = file("${sslLibPath}")
                }
            }
        }
    }
}